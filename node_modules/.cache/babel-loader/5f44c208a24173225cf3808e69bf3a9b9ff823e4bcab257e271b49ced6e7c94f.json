{"ast":null,"code":"import _slicedToArray from\"/Users/uzornakovre/Desktop/WEBDEV/\\u041E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435/\\u042F\\u043D\\u0434\\u0435\\u043A\\u0441 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C/Practice/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import PopupWithForm from'./PopupWithForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar,isLoading=_ref.isLoading,onOverlayClick=_ref.onOverlayClick;var avatarRef=React.useRef();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),avatarLink=_React$useState2[0],setAvatarLink=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),avInputInit=_React$useState4[0],setAvInputInit=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),avatarError=_React$useState6[0],setAvatarError=_React$useState6[1];var isValid=avatarError==='';// Отправка формы\nfunction handleSubmit(evt){evt.preventDefault();onUpdateAvatar({avatar:avatarRef.current.value});}// Обновление стейтов при повторном открытии модального окна\nReact.useEffect(function(){setAvatarLink('');setAvInputInit(false);setAvatarError(avatarRef.current.validationMessage);},[isOpen]);// Обработчик изменения поля ввода\nfunction handleChangeAvatar(evt){setAvatarLink(evt.target.value);setAvInputInit(true);setAvatarError(avatarRef.current.validationMessage);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:'avatar',title:'Обновить аватар',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isValid:isValid,isLoading:isLoading,onOverlayClick:onOverlayClick,children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__form-input popup__form-input_content_avatar \".concat(avInputInit&&!isValid&&'popup__form-input_error'),id:\"avatar\",name:\"avatar-url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",value:avatarLink||'',ref:avatarRef,onChange:handleChangeAvatar,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-input-error popup__form-input-error_content_avatar\",children:avInputInit&&\"\".concat(avatarError)})]});}export default EditAvatarPopup;","map":{"version":3,"names":["React","PopupWithForm","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","isLoading","onOverlayClick","avatarRef","useRef","useState","avatarLink","setAvatarLink","avInputInit","setAvInputInit","avatarError","setAvatarError","isValid","handleSubmit","evt","preventDefault","avatar","current","value","useEffect","validationMessage","handleChangeAvatar","target"],"sources":["/Users/uzornakovre/Desktop/WEBDEV/Обучение/Яндекс Практикум/Practice/dev/mesto-react/src/components/EditAvatarPopup.js"],"sourcesContent":["import React         from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen,\n                           onClose,\n                           onUpdateAvatar,\n                           isLoading,\n                           onOverlayClick }) {\n\n  const avatarRef                     = React.useRef();\n  const [avatarLink,  setAvatarLink ] = React.useState('');\n  const [avInputInit, setAvInputInit] = React.useState(false);\n  const [avatarError, setAvatarError] = React.useState('');\n  const isValid                       = avatarError === '';\n\n\n  // Отправка формы\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    })\n  }\n\n  // Обновление стейтов при повторном открытии модального окна\n\n  React.useEffect(() => {\n    setAvatarLink('');\n    setAvInputInit(false);\n    setAvatarError(avatarRef.current.validationMessage);\n  }, [isOpen])\n\n  // Обработчик изменения поля ввода\n\n  function handleChangeAvatar(evt) {\n    setAvatarLink(evt.target.value);\n    setAvInputInit(true);\n    setAvatarError(avatarRef.current.validationMessage);\n  }\n\n  return (\n    <PopupWithForm name={'avatar'}\n                   title={'Обновить аватар'}\n                   isOpen={isOpen}\n                   onClose={onClose}\n                   onSubmit={handleSubmit}\n                   isValid={isValid}\n                   isLoading={isLoading}\n                   onOverlayClick={onOverlayClick}\n    >\n      <input type=\"url\"\n             className={`popup__form-input popup__form-input_content_avatar ${\n               avInputInit && !isValid && 'popup__form-input_error'\n             }`}\n             id=\"avatar\"\n             name=\"avatar-url\"\n             placeholder=\"Ссылка на аватар\"\n             value={avatarLink || ''}\n             ref={avatarRef}\n             onChange={handleChangeAvatar}\n             required\n      />\n      <span className=\"popup__form-input-error popup__form-input-error_content_avatar\">\n        {avInputInit && `${avatarError}`}  \n      </span>  \n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;"],"mappings":"6RAAA,MAAOA,MAAK,KAAc,OAAO,CACjC,MAAOC,cAAa,KAAM,iBAAiB,CAAC,wFAE5C,QAASC,gBAAe,MAIqB,IAJlBC,OAAM,MAANA,MAAM,CACNC,OAAO,MAAPA,OAAO,CACPC,cAAc,MAAdA,cAAc,CACdC,SAAS,MAATA,SAAS,CACTC,cAAc,MAAdA,cAAc,CAEvC,GAAMC,UAAS,CAAuBR,KAAK,CAACS,MAAM,EAAE,CACpD,oBAAsCT,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC,oDAAjDC,UAAU,qBAAGC,aAAa,qBACjC,qBAAsCZ,KAAK,CAACU,QAAQ,CAAC,KAAK,CAAC,qDAApDG,WAAW,qBAAEC,cAAc,qBAClC,qBAAsCd,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC,qDAAjDK,WAAW,qBAAEC,cAAc,qBAClC,GAAMC,QAAO,CAAyBF,WAAW,GAAK,EAAE,CAGxD;AAEA,QAASG,aAAY,CAACC,GAAG,CAAE,CACzBA,GAAG,CAACC,cAAc,EAAE,CAEpBf,cAAc,CAAC,CACbgB,MAAM,CAAEb,SAAS,CAACc,OAAO,CAACC,KAC5B,CAAC,CAAC,CACJ,CAEA;AAEAvB,KAAK,CAACwB,SAAS,CAAC,UAAM,CACpBZ,aAAa,CAAC,EAAE,CAAC,CACjBE,cAAc,CAAC,KAAK,CAAC,CACrBE,cAAc,CAACR,SAAS,CAACc,OAAO,CAACG,iBAAiB,CAAC,CACrD,CAAC,CAAE,CAACtB,MAAM,CAAC,CAAC,CAEZ;AAEA,QAASuB,mBAAkB,CAACP,GAAG,CAAE,CAC/BP,aAAa,CAACO,GAAG,CAACQ,MAAM,CAACJ,KAAK,CAAC,CAC/BT,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAACR,SAAS,CAACc,OAAO,CAACG,iBAAiB,CAAC,CACrD,CAEA,mBACE,MAAC,aAAa,EAAC,IAAI,CAAE,QAAS,CACf,KAAK,CAAE,iBAAkB,CACzB,MAAM,CAAEtB,MAAO,CACf,OAAO,CAAEC,OAAQ,CACjB,QAAQ,CAAEc,YAAa,CACvB,OAAO,CAAED,OAAQ,CACjB,SAAS,CAAEX,SAAU,CACrB,cAAc,CAAEC,cAAe,wBAE5C,cAAO,IAAI,CAAC,KAAK,CACV,SAAS,8DACPM,WAAW,EAAI,CAACI,OAAO,EAAI,yBAAyB,CACnD,CACH,EAAE,CAAC,QAAQ,CACX,IAAI,CAAC,YAAY,CACjB,WAAW,CAAC,wFAAkB,CAC9B,KAAK,CAAEN,UAAU,EAAI,EAAG,CACxB,GAAG,CAAEH,SAAU,CACf,QAAQ,CAAEkB,kBAAmB,CAC7B,QAAQ,OACb,cACF,aAAM,SAAS,CAAC,gEAAgE,UAC7Eb,WAAW,YAAOE,WAAW,CAAE,EAC3B,GACO,CAEpB,CAEA,cAAeb,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}