{"ast":null,"code":"import _slicedToArray from\"/Users/uzornakovre/Desktop/WEBDEV/\\u041E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435/\\u042F\\u043D\\u0434\\u0435\\u043A\\u0441 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C/Practice/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import PopupWithForm from'./PopupWithForm';import urlValidation from'../utils/urlValidation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(props){var avatarRef=React.useRef();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),avatarLink=_React$useState2[0],setAvatarLink=_React$useState2[1];// для валидации\nvar _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),avInputInit=_React$useState4[0],setAvInputInit=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),avatarError=_React$useState6[0],setAvatarError=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isValid=_React$useState8[0],setIsValid=_React$useState8[1];var _React$useState9=React.useState('Сохранить'),_React$useState10=_slicedToArray(_React$useState9,2),submitText=_React$useState10[0],setSubmitText=_React$useState10[1];// Отправка формы\nfunction handleSubmit(evt){evt.preventDefault();props.onUpdateAvatar({avatar:avatarRef.current.value});}// Обновление стейтов при повторном открытии модального окна\nReact.useEffect(function(){setAvatarLink('');setAvInputInit(false);},[props.isOpen]);// Индикатор загрузки запросов\nReact.useEffect(function(){if(props.isLoading){setSubmitText('Сохранение...');}else{setSubmitText('Сохранить');}},[props.isLoading]);// Валидация\nReact.useEffect(function(){if(avatarRef.current.value.length===0){setAvatarError('Заполните это поле');setIsValid(false);}else if(urlValidation(avatarRef.current.value)){setAvatarError('Введите URL');setIsValid(false);}else{setAvatarError('');setIsValid(true);}},[avatarLink]);function handleChangeAvatar(evt){setAvatarLink(evt.target.value);setAvInputInit(true);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:'avatar',title:'Обновить аватар',submitText:submitText,isOpen:props.isOpen,onClose:props.onClose,onSubmit:handleSubmit,isValid:isValid,children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__form-input popup__form-input_content_avatar \".concat(avInputInit&&!isValid&&'popup__form-input_error'),id:\"avatar\",name:\"avatar-url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",value:avatarLink||'',ref:avatarRef,onChange:handleChangeAvatar,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-input-error popup__form-input-error_content_avatar\",children:avInputInit&&\"\".concat(avatarError)})]});}export default EditAvatarPopup;","map":{"version":3,"names":["React","PopupWithForm","urlValidation","EditAvatarPopup","props","avatarRef","useRef","useState","avatarLink","setAvatarLink","avInputInit","setAvInputInit","avatarError","setAvatarError","isValid","setIsValid","submitText","setSubmitText","handleSubmit","evt","preventDefault","onUpdateAvatar","avatar","current","value","useEffect","isOpen","isLoading","length","handleChangeAvatar","target","onClose"],"sources":["/Users/uzornakovre/Desktop/WEBDEV/Обучение/Яндекс Практикум/Practice/dev/mesto-react/src/components/EditAvatarPopup.js"],"sourcesContent":["import React         from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport urlValidation from '../utils/urlValidation';\n\nfunction EditAvatarPopup(props) {\n\n  const avatarRef                     = React.useRef();\n  const [avatarLink,  setAvatarLink ] = React.useState(''); // для валидации\n  const [avInputInit, setAvInputInit] = React.useState(false);\n  const [avatarError, setAvatarError] = React.useState('');\n  const [isValid,     setIsValid    ] = React.useState(false);\n  const [submitText,  setSubmitText ] = React.useState('Сохранить');\n\n  // Отправка формы\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value\n    })\n  }\n\n  // Обновление стейтов при повторном открытии модального окна\n\n  React.useEffect(() => {\n    setAvatarLink('');\n    setAvInputInit(false);\n  }, [props.isOpen])\n\n  // Индикатор загрузки запросов\n\n  React.useEffect(() => {\n    if (props.isLoading) {\n      setSubmitText('Сохранение...');\n    } else {\n      setSubmitText('Сохранить');\n    }\n  }, [props.isLoading]);\n\n  // Валидация\n\n  React.useEffect(() => {\n    if (avatarRef.current.value.length === 0) { \n      setAvatarError('Заполните это поле');\n      setIsValid(false);\n    } else if (urlValidation(avatarRef.current.value)) {\n      setAvatarError('Введите URL');\n      setIsValid(false);\n    } else {\n      setAvatarError('');\n      setIsValid(true);\n    }\n  }, [avatarLink]);\n\n  function handleChangeAvatar(evt) {\n    setAvatarLink(evt.target.value);\n    setAvInputInit(true);\n  }\n\n  return (\n    <PopupWithForm \n      name={'avatar'}\n      title={'Обновить аватар'}\n      submitText={submitText}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      isValid={isValid}\n    >\n      <input type=\"url\"\n            className={`popup__form-input popup__form-input_content_avatar ${avInputInit && !isValid && 'popup__form-input_error'}`}\n            id=\"avatar\"\n            name=\"avatar-url\"\n            placeholder=\"Ссылка на аватар\"\n            value={avatarLink || ''}\n            ref={avatarRef}\n            onChange={handleChangeAvatar}\n            required\n      />\n      <span className=\"popup__form-input-error popup__form-input-error_content_avatar\">\n        {avInputInit && `${avatarError}`}  \n      </span>  \n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;"],"mappings":"6RAAA,MAAOA,MAAK,KAAc,OAAO,CACjC,MAAOC,cAAa,KAAM,iBAAiB,CAC3C,MAAOC,cAAa,KAAM,wBAAwB,CAAC,wFAEnD,QAASC,gBAAe,CAACC,KAAK,CAAE,CAE9B,GAAMC,UAAS,CAAuBL,KAAK,CAACM,MAAM,EAAE,CACpD,oBAAsCN,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC,oDAAjDC,UAAU,qBAAGC,aAAa,qBAAyB;AAC1D,qBAAsCT,KAAK,CAACO,QAAQ,CAAC,KAAK,CAAC,qDAApDG,WAAW,qBAAEC,cAAc,qBAClC,qBAAsCX,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC,qDAAjDK,WAAW,qBAAEC,cAAc,qBAClC,qBAAsCb,KAAK,CAACO,QAAQ,CAAC,KAAK,CAAC,qDAApDO,OAAO,qBAAMC,UAAU,qBAC9B,qBAAsCf,KAAK,CAACO,QAAQ,CAAC,WAAW,CAAC,sDAA1DS,UAAU,sBAAGC,aAAa,sBAEjC;AAEA,QAASC,aAAY,CAACC,GAAG,CAAE,CACzBA,GAAG,CAACC,cAAc,EAAE,CAEpBhB,KAAK,CAACiB,cAAc,CAAC,CACnBC,MAAM,CAAEjB,SAAS,CAACkB,OAAO,CAACC,KAC5B,CAAC,CAAC,CACJ,CAEA;AAEAxB,KAAK,CAACyB,SAAS,CAAC,UAAM,CACpBhB,aAAa,CAAC,EAAE,CAAC,CACjBE,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAE,CAACP,KAAK,CAACsB,MAAM,CAAC,CAAC,CAElB;AAEA1B,KAAK,CAACyB,SAAS,CAAC,UAAM,CACpB,GAAIrB,KAAK,CAACuB,SAAS,CAAE,CACnBV,aAAa,CAAC,eAAe,CAAC,CAChC,CAAC,IAAM,CACLA,aAAa,CAAC,WAAW,CAAC,CAC5B,CACF,CAAC,CAAE,CAACb,KAAK,CAACuB,SAAS,CAAC,CAAC,CAErB;AAEA3B,KAAK,CAACyB,SAAS,CAAC,UAAM,CACpB,GAAIpB,SAAS,CAACkB,OAAO,CAACC,KAAK,CAACI,MAAM,GAAK,CAAC,CAAE,CACxCf,cAAc,CAAC,oBAAoB,CAAC,CACpCE,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,IAAIb,aAAa,CAACG,SAAS,CAACkB,OAAO,CAACC,KAAK,CAAC,CAAE,CACjDX,cAAc,CAAC,aAAa,CAAC,CAC7BE,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,CACLF,cAAc,CAAC,EAAE,CAAC,CAClBE,UAAU,CAAC,IAAI,CAAC,CAClB,CACF,CAAC,CAAE,CAACP,UAAU,CAAC,CAAC,CAEhB,QAASqB,mBAAkB,CAACV,GAAG,CAAE,CAC/BV,aAAa,CAACU,GAAG,CAACW,MAAM,CAACN,KAAK,CAAC,CAC/Bb,cAAc,CAAC,IAAI,CAAC,CACtB,CAEA,mBACE,MAAC,aAAa,EACZ,IAAI,CAAE,QAAS,CACf,KAAK,CAAE,iBAAkB,CACzB,UAAU,CAAEK,UAAW,CACvB,MAAM,CAAEZ,KAAK,CAACsB,MAAO,CACrB,OAAO,CAAEtB,KAAK,CAAC2B,OAAQ,CACvB,QAAQ,CAAEb,YAAa,CACvB,OAAO,CAAEJ,OAAQ,wBAEjB,cAAO,IAAI,CAAC,KAAK,CACX,SAAS,8DAAwDJ,WAAW,EAAI,CAACI,OAAO,EAAI,yBAAyB,CAAG,CACxH,EAAE,CAAC,QAAQ,CACX,IAAI,CAAC,YAAY,CACjB,WAAW,CAAC,wFAAkB,CAC9B,KAAK,CAAEN,UAAU,EAAI,EAAG,CACxB,GAAG,CAAEH,SAAU,CACf,QAAQ,CAAEwB,kBAAmB,CAC7B,QAAQ,OACZ,cACF,aAAM,SAAS,CAAC,gEAAgE,UAC7EnB,WAAW,YAAOE,WAAW,CAAE,EAC3B,GACO,CAEpB,CAEA,cAAeT,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}