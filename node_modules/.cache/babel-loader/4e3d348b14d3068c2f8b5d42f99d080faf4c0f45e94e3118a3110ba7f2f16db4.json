{"ast":null,"code":"import _slicedToArray from\"/Users/uzornakovre/Desktop/WEBDEV/\\u041E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435/\\u042F\\u043D\\u0434\\u0435\\u043A\\u0441 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C/Practice/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import PopupWithForm from'./PopupWithForm';import urlValidation from'../utils/urlValidation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddPlacePopup(props){var placeNameRef=React.useRef();var placeLinkRef=React.useRef();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),placeName=_React$useState2[0],setPlaceName=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),placeLink=_React$useState4[0],setPlaceLink=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),plNameInputInit=_React$useState6[0],setPlNameInputInit=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),plLinkInputInit=_React$useState8[0],setPlLinkInputInit=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),placeNameError=_React$useState10[0],setPlaceNameError=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),placeLinkError=_React$useState12[0],setPlaceLinkError=_React$useState12[1];var _React$useState13=React.useState(true),_React$useState14=_slicedToArray(_React$useState13,2),isValid=_React$useState14[0],setIsValid=_React$useState14[1];var _React$useState15=React.useState('Создать'),_React$useState16=_slicedToArray(_React$useState15,2),submitText=_React$useState16[0],setSubmitText=_React$useState16[1];// Отправка формы\nfunction handleSubmit(evt){evt.preventDefault();props.onAddPlace({placeName:placeNameRef.current.value,placeLink:placeLinkRef.current.value});placeNameRef.current.value='';placeLinkRef.current.value='';}// Обновление стейтов при повторном открытии модального окна\nReact.useEffect(function(){setPlaceName('');setPlaceLink('');setPlNameInputInit(false);setPlLinkInputInit(false);},[props.isOpen]);// Индикатор загрузки запросов\nReact.useEffect(function(){if(props.isLoading){setSubmitText('Создание карточки...');}else{setSubmitText('Создать');}},[props.isLoading]);// Валидация\nReact.useEffect(function(){if(placeNameRef.current.value.length<1){setPlaceNameError(\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u044D\\u0442\\u043E \\u043F\\u043E\\u043B\\u0435\");}else if(placeNameRef.current.value.length<=2){setPlaceNameError(\"\\u0422\\u0435\\u043A\\u0441\\u0442 \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0431\\u044B\\u0442\\u044C \\u043D\\u0435 \\u043A\\u043E\\u0440\\u043E\\u0447\\u0435 2 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432\");}else{setPlaceNameError('');}},[placeName]);React.useEffect(function(){if(placeLinkRef.current.value.length===0){setPlaceLinkError(\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u044D\\u0442\\u043E \\u043F\\u043E\\u043B\\u0435\");}else if(urlValidation(placeLinkRef.current.value)){setPlaceLinkError(\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 URL\");}else{setPlaceLinkError('');}},[placeLink]);React.useEffect(function(){if(placeNameError===''&&placeLinkError===''){setIsValid(true);}else{setIsValid(false);}},[placeNameError,placeLinkError]);function handleChangePlaceName(evt){setPlaceName(evt.target.value);setPlNameInputInit(true);}function handleChangePlaceLink(evt){setPlaceLink(evt.target.value);setPlLinkInputInit(true);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:'new-place',title:'Новое место',submitText:submitText,isOpen:props.isOpen,onClose:props.onClose,onSubmit:handleSubmit,isValid:isValid,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__form-input popup__form-input_content_place \".concat(plNameInputInit&&placeNameError!==''&&'popup__form-input_error'),id:\"place\",name:\"input_place-name\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",minLength:\"2\",maxLength:\"30\",value:placeName||'',ref:placeNameRef,onChange:handleChangePlaceName,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-input-error popup__form-input-error_content_place\",children:plNameInputInit&&\"\".concat(placeNameError)}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__form-input popup__form-input_content_avatar \".concat(plLinkInputInit&&placeLinkError!==''&&'popup__form-input_error'),id:\"url\",name:\"image-url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",value:placeLink||'',ref:placeLinkRef,onChange:handleChangePlaceLink,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-input-error popup__form-input-error_content_url\",children:plLinkInputInit&&\"\".concat(placeLinkError)})]});}export default AddPlacePopup;","map":{"version":3,"names":["React","PopupWithForm","urlValidation","AddPlacePopup","props","placeNameRef","useRef","placeLinkRef","useState","placeName","setPlaceName","placeLink","setPlaceLink","plNameInputInit","setPlNameInputInit","plLinkInputInit","setPlLinkInputInit","placeNameError","setPlaceNameError","placeLinkError","setPlaceLinkError","isValid","setIsValid","submitText","setSubmitText","handleSubmit","evt","preventDefault","onAddPlace","current","value","useEffect","isOpen","isLoading","length","handleChangePlaceName","target","handleChangePlaceLink","onClose"],"sources":["/Users/uzornakovre/Desktop/WEBDEV/Обучение/Яндекс Практикум/Practice/dev/mesto-react/src/components/AddPlacePopup.js"],"sourcesContent":["import React         from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport urlValidation from '../utils/urlValidation';\n\nfunction AddPlacePopup(props) {\n\n  const placeNameRef                          = React.useRef();\n  const placeLinkRef                          = React.useRef();\n  const [placeName,       setPlaceName      ] = React.useState('');\n  const [placeLink,       setPlaceLink      ] = React.useState('');\n  const [plNameInputInit, setPlNameInputInit] = React.useState(false);\n  const [plLinkInputInit, setPlLinkInputInit] = React.useState(false);\n  const [placeNameError,  setPlaceNameError ] = React.useState('');\n  const [placeLinkError,  setPlaceLinkError ] = React.useState('');\n  const [isValid,         setIsValid        ] = React.useState(true);\n  const [submitText,      setSubmitText     ] = React.useState('Создать');\n\n  // Отправка формы\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onAddPlace({ \n      placeName: placeNameRef.current.value,\n      placeLink: placeLinkRef.current.value \n    });\n\n    placeNameRef.current.value = '';\n    placeLinkRef.current.value = '';\n  }\n\n  // Обновление стейтов при повторном открытии модального окна\n\n  React.useEffect(() => {\n    setPlaceName('');\n    setPlaceLink('');\n    setPlNameInputInit(false);\n    setPlLinkInputInit(false);\n  }, [props.isOpen])\n\n  // Индикатор загрузки запросов\n\n  React.useEffect(() => {\n    if (props.isLoading) {\n      setSubmitText('Создание карточки...');\n    } else {\n      setSubmitText('Создать');\n    }\n  }, [props.isLoading]);\n\n  // Валидация\n\n  React.useEffect(() => {\n    if (placeNameRef.current.value.length < 1) { \n      setPlaceNameError(`Заполните это поле`);\n    } else if (placeNameRef.current.value.length <=  2) {\n      setPlaceNameError(`Текст должен быть не короче 2 символов`);\n    } else {\n      setPlaceNameError('');\n    }\n  }, [placeName]);\n\n  React.useEffect(() => {\n    if (placeLinkRef.current.value.length === 0) { \n      setPlaceLinkError(`Заполните это поле`);\n    } else if (urlValidation(placeLinkRef.current.value)) {\n      setPlaceLinkError(`Введите URL`);\n    } else {\n      setPlaceLinkError('');\n    }\n  }, [placeLink]);\n\n  React.useEffect(() => {\n    if (placeNameError === '' && placeLinkError === '') {\n      setIsValid(true);\n    } else {\n      setIsValid(false);\n    }\n  }, [placeNameError, placeLinkError]);\n\n  function handleChangePlaceName(evt) {\n    setPlaceName(evt.target.value);\n    setPlNameInputInit(true);\n  }\n\n  function handleChangePlaceLink(evt) {\n    setPlaceLink(evt.target.value);\n    setPlLinkInputInit(true);\n  }\n\n  return (\n    <PopupWithForm \n      name={'new-place'}\n      title={'Новое место'}\n      submitText={submitText}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      isValid={isValid}\n    >\n      <input type=\"text\"\n             className={`popup__form-input popup__form-input_content_place ${plNameInputInit && placeNameError !== '' && 'popup__form-input_error'}`}\n             id=\"place\"\n             name=\"input_place-name\"\n             placeholder=\"Название\"\n             minLength=\"2\"\n             maxLength=\"30\"\n             value={placeName || ''}\n             ref={placeNameRef}\n             onChange={handleChangePlaceName}\n             required\n      />\n      <span className=\"popup__form-input-error popup__form-input-error_content_place\">\n        {plNameInputInit && `${placeNameError}`}\n      </span>\n      <input type=\"url\" \n             className={`popup__form-input popup__form-input_content_avatar ${plLinkInputInit && placeLinkError !== '' && 'popup__form-input_error'}`}\n             id=\"url\"\n             name=\"image-url\"\n             placeholder=\"Ссылка на картинку\"\n             value={placeLink || ''}\n             ref={placeLinkRef}\n             onChange={handleChangePlaceLink}\n             required />\n      <span className=\"popup__form-input-error popup__form-input-error_content_url\">\n        {plLinkInputInit && `${placeLinkError}`}\n      </span>\n    </PopupWithForm>  \n  )\n}\n\nexport default AddPlacePopup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}