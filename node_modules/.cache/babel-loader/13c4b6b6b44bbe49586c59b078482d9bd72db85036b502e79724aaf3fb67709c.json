{"ast":null,"code":"import _slicedToArray from\"/Users/uzornakovre/Desktop/WEBDEV/\\u041E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435/\\u042F\\u043D\\u0434\\u0435\\u043A\\u0441 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C/Practice/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import PopupWithForm from'./PopupWithForm';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(props){var currentUser=React.useContext(CurrentUserContext);var nameRef=React.useRef();var descRef=React.useRef();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),description=_React$useState4[0],setDescription=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),nameError=_React$useState6[0],setNameError=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),descError=_React$useState8[0],setDescError=_React$useState8[1];var _React$useState9=React.useState(true),_React$useState10=_slicedToArray(_React$useState9,2),isValid=_React$useState10[0],setIsValid=_React$useState10[1];var _React$useState11=React.useState('Сохранить'),_React$useState12=_slicedToArray(_React$useState11,2),submitText=_React$useState12[0],setSubmitText=_React$useState12[1];// Отправка формы\nfunction handleSubmit(evt){evt.preventDefault();props.onUpdateUser({name:name,about:description});}// Обновление стейтов при открытии модального окна\nReact.useEffect(function(){setName(currentUser.name);setDescription(currentUser.about);},[props.isOpen,currentUser.about,currentUser.name]);// Индикатор загрузки запросов\nReact.useEffect(function(){if(props.isLoading){setSubmitText('Сохранение...');}else{setSubmitText('Сохранить');}},[props.isLoading]);// Валидация\nReact.useEffect(function(){if(nameRef.current.value.length===0){setNameError(\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u044D\\u0442\\u043E \\u043F\\u043E\\u043B\\u0435\");}else if(nameRef.current.value.length<=2){setNameError(\"\\u0422\\u0435\\u043A\\u0441\\u0442 \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0431\\u044B\\u0442\\u044C \\u043D\\u0435 \\u043A\\u043E\\u0440\\u043E\\u0447\\u0435 2 \\u0441\\u0438\\u043C\\u0432. \\u0414\\u043B\\u0438\\u043D\\u0430 \\u0442\\u0435\\u043A\\u0441\\u0442\\u0430 \\u0441\\u0435\\u0439\\u0447\\u0430\\u0441: \".concat(nameRef.current.value.length,\" \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B.\"));}else{setNameError('');}},[name]);React.useEffect(function(){if(descRef.current.value.length===0){setDescError(\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u044D\\u0442\\u043E \\u043F\\u043E\\u043B\\u0435\");}else if(descRef.current.value.length<=2){setDescError(\"\\u0422\\u0435\\u043A\\u0441\\u0442 \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0431\\u044B\\u0442\\u044C \\u043D\\u0435 \\u043A\\u043E\\u0440\\u043E\\u0447\\u0435 2 \\u0441\\u0438\\u043C\\u0432. \\u0414\\u043B\\u0438\\u043D\\u0430 \\u0442\\u0435\\u043A\\u0441\\u0442\\u0430 \\u0441\\u0435\\u0439\\u0447\\u0430\\u0441: \".concat(descRef.current.value.length,\" \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B.\"));}else{setDescError('');}},[description]);React.useEffect(function(){if(nameError===''&&descError===''){setIsValid(true);}else{setIsValid(false);}},[nameError,descError]);function handleChangeName(evt){setName(evt.target.value);}function handleChangeDescription(evt){setDescription(evt.target.value);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:'edit-profile',title:'Редактировать профиль',submitText:submitText,isOpen:props.isOpen,onClose:props.onClose,onSubmit:handleSubmit,isValid:isValid,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__form-input popup__form-input_content_name \".concat(nameError!==''&&'popup__form-input_error'),id:\"name\",name:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:\"2\",maxLength:\"40\",value:name||'',ref:nameRef,onChange:handleChangeName,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-input-error popup__form-input-error_content_name\",children:nameError}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__form-input popup__form-input_content_job \".concat(descError!==''&&'popup__form-input_error'),id:\"job\",name:\"description\",placeholder:\"\\u041F\\u0440\\u043E\\u0444\\u0435\\u0441\\u0441\\u0438\\u044F\",minLength:\"2\",maxLength:\"200\",value:description||'',ref:descRef,onChange:handleChangeDescription,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-input-error popup__form-input-error_content_job\",children:descError})]});}export default EditProfilePopup;","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","EditProfilePopup","props","currentUser","useContext","nameRef","useRef","descRef","useState","name","setName","description","setDescription","nameError","setNameError","descError","setDescError","isValid","setIsValid","submitText","setSubmitText","handleSubmit","evt","preventDefault","onUpdateUser","about","useEffect","isOpen","isLoading","current","value","length","handleChangeName","target","handleChangeDescription","onClose"],"sources":["/Users/uzornakovre/Desktop/WEBDEV/Обучение/Яндекс Практикум/Practice/dev/mesto-react/src/components/EditProfilePopup.js"],"sourcesContent":["import React                  from 'react';\nimport PopupWithForm          from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction EditProfilePopup(props) {\n\n  const currentUser                   = React.useContext(CurrentUserContext);\n  const nameRef                       = React.useRef();\n  const descRef                       = React.useRef();\n  const [name,        setName       ] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  const [nameError,   setNameError  ] = React.useState('');\n  const [descError,   setDescError  ] = React.useState('');\n  const [isValid,     setIsValid    ] = React.useState(true);\n  const [submitText,  setSubmitText ] = React.useState('Сохранить');\n\n  // Отправка формы\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description\n    });\n  }\n\n  // Обновление стейтов при открытии модального окна\n \n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [props.isOpen, currentUser.about, currentUser.name]);\n\n  // Индикатор загрузки запросов\n\n  React.useEffect(() => {\n    if (props.isLoading) {\n      setSubmitText('Сохранение...');\n    } else {\n      setSubmitText('Сохранить');\n    }\n  }, [props.isLoading]);\n\n  // Валидация\n\n  React.useEffect(() => {\n    if (nameRef.current.value.length === 0) { \n      setNameError(`Заполните это поле`);\n    } else if (nameRef.current.value.length <=  2) {\n      setNameError(`Текст должен быть не короче 2 симв. Длина текста сейчас: ${nameRef.current.value.length} символ.`);\n    } else {\n      setNameError('');\n    }\n  }, [name]);\n\n  React.useEffect(() => {\n    if (descRef.current.value.length === 0) { \n      setDescError(`Заполните это поле`);\n    } else if (descRef.current.value.length <=  2) {\n      setDescError(`Текст должен быть не короче 2 симв. Длина текста сейчас: ${descRef.current.value.length} символ.`);\n    } else {\n      setDescError('');\n    }\n  }, [description]);\n\n  React.useEffect(() => {\n    if (nameError === '' && descError === '') {\n      setIsValid(true);\n    } else {\n      setIsValid(false);\n    }\n  }, [nameError, descError]);\n\n  function handleChangeName(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleChangeDescription(evt) {\n    setDescription(evt.target.value);\n  }\n\n  return (\n    <PopupWithForm \n            name={'edit-profile'}\n            title={'Редактировать профиль'}\n            submitText={submitText}\n            isOpen={props.isOpen}\n            onClose={props.onClose}\n            onSubmit={handleSubmit}\n            isValid={isValid}\n          >\n            <input type=\"text\"\n                   className={`popup__form-input popup__form-input_content_name ${nameError !== '' && 'popup__form-input_error'}`}\n                   id=\"name\"\n                   name=\"name\"\n                   placeholder=\"Имя\"\n                   minLength=\"2\"\n                   maxLength=\"40\"\n                   value={name || ''}\n                   ref={nameRef}\n                   onChange={handleChangeName}\n                   required\n            />\n            <span className=\"popup__form-input-error popup__form-input-error_content_name\">\n              {nameError}\n            </span>\n            <input type=\"text\"\n                   className={`popup__form-input popup__form-input_content_job ${descError !== '' && 'popup__form-input_error'}`}\n                   id=\"job\"\n                   name=\"description\"\n                   placeholder=\"Профессия\"\n                   minLength=\"2\"\n                   maxLength=\"200\"\n                   value={description || ''}\n                   ref={descRef}\n                   onChange={handleChangeDescription}\n                   required\n            />\n            <span className=\"popup__form-input-error popup__form-input-error_content_job\">\n              {descError}\n            </span>\n          </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}